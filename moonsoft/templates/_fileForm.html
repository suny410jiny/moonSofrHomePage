{% load bootstrap4 %}
<div class="card">
  {% if  form_title %}
    <div class="card-header">
        {{form_title}}
    </div>
  {% endif %}
  <div class="card-body">
        {% if  form %}
            <form action="" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {% bootstrap_form form%}
                <div id="images" class="img-fluid"></div>
{#                <input type="button" class="btn btn-primary mt-3" name="add_image" id="add_image" value="Add Image">#}
                <input type="button" class="btn btn-secondary" name="add_image" id="add_image" value="Add Image" style="width: 100%;margin-bottom: 10px"/>
                {% buttons %}
                    <button type="submit" class="btn btn-primary " style="width: 100%;">
                        {{ submit_label|default:'Submit'}}
                    </button>
                {% endbuttons %}
            </form>
        {% else %}
            <div class="alert alert-danger">
                폼객체를 지정해 주세요.
            </div>
        {% endif %}

    </div>
</div>
<script>
    document.getElementById("add_image").onclick=function (ev) {
        var image=document.getElementById("images");
        var preview=document.createElement("img");
        preview.style.width="auto";
        preview.style.height="100px";
        var newInput=document.createElement("input");
        newInput.type="file";
        newInput.name="file[]";
        newInput.className="file-upload";
        var br=document.createElement("br");
        var br1=document.createElement("br");

        newInput.onchange=function (ev1) {
            if(this.files && this.files[0]){
                var fileReader=new FileReader();
                fileReader.onload=function (ev2) {
                    preview.src=ev2.target.result;
                };
                fileReader.readAsDataURL(this.files[0])
            }
        };
        image.appendChild(preview);
        image.appendChild(newInput);
        image.appendChild(br);
        image.appendChild(br1);
    }
</script>
